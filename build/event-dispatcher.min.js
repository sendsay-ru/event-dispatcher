var slice=[].slice;!function(t,n){return t.define&&"function"==typeof t.define&&t.define.amd?define([],function(){return n(t,{})}):t.EventDispatcher=n(t,{})}(this,function(t,n){return n=function(){function t(t){null==t&&(t={}),this._handlers={},this._splitter=t.splitter||/[\s,]+/}return t.prototype.once=function(t,n,l){var e,r,i,s;for(null==t&&(t=""),null==l&&(l=this),i=t.split(this._splitter),s=[],e=0,r=i.length;r>e;e++)t=i[e],s.push(function(t){return function(e){var r;return r=function(){var t;return t=1<=arguments.length?slice.call(arguments,0):[],n.call.apply(n,[l].concat(slice.call(t))),this.off(e,r)},t.on(e,r)}}(this)(t));return s},t.prototype.on=function(t,n,l){var e,r,i,s;for(null==t&&(t=""),null==l&&(l=this),s=t.split(this._splitter),r=0,i=s.length;i>r;r++)t=s[r],e=this._handlers[t]||(this._handlers[t]=[]),e.push({callback:n,ctx:l});return this},t.prototype.off=function(t,n,l){var e,r,i,s,h,c,a,u;for(null==t&&(t=""),null==l&&(l=this),a=t.split(this._splitter),i=0,h=a.length;h>i;i++){for(t=a[i],r=this._handlers[t]||(this._handlers[t]=[]),u=[],s=0,c=r.length;c>s;s++)e=r[s],(n&&e.callback!==n||l&&e.ctx!==l)&&u.push(e);u.length?this._handlers[t]=u:delete this._handlers[t]}return this},t.prototype.trigger=function(){var t,n,l,e,r,i,s,h,c,a;for(h=arguments[0],t=2<=arguments.length?slice.call(arguments,1):[],c=h.split(this._splitter),e=0,i=c.length;i>e;e++)for(h=c[e],l=this._handlers[h]||(this._handlers[h]=[]),r=0,s=l.length;s>r;r++)n=l[r],n.callback&&(a=n.callback).call.apply(a,[n.ctx].concat(slice.call(t)));return this},t}()});
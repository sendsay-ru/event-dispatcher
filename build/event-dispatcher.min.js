var slice=[].slice;!function(t,n){return t.define&&"function"==typeof t.define&&t.define.amd?define([],function(){return n(t,{})}):t.EventDispatcher=n(t,{})}(this,function(t,n){return n=function(){function t(t){null==t&&(t={}),this._handlers={},this._splitter=t.splitter||/[\s,]+/}return t.prototype.on=function(t,n,l){var e,s,i,r;for(null==t&&(t=""),null==l&&(l=this),r=t.split(this._splitter),s=0,i=r.length;i>s;s++)t=r[s],e=this._handlers[t]||(this._handlers[t]=[]),e.push({callback:n,ctx:l});return this},t.prototype.off=function(t,n,l){var e,s,i,r,h,a,c,u;for(null==t&&(t=""),null==l&&(l=this),c=t.split(this._splitter),i=0,h=c.length;h>i;i++){for(t=c[i],s=this._handlers[t]||(this._handlers[t]=[]),u=[],r=0,a=s.length;a>r;r++)e=s[r],(n&&e.callback!==n||l&&e.ctx!==l)&&u.push(e);u.length?this._handlers[t]=u:delete this._handlers[t]}return this},t.prototype.trigger=function(){var t,n,l,e,s,i,r,h,a,c;for(h=arguments[0],t=2<=arguments.length?slice.call(arguments,1):[],a=h.split(this._splitter),e=0,i=a.length;i>e;e++)for(h=a[e],l=this._handlers[h]||(this._handlers[h]=[]),s=0,r=l.length;r>s;s++)n=l[s],n.callback&&(c=n.callback).call.apply(c,[n.ctx].concat(slice.call(t)));return this},t}()});